(this.webpackJsonp=this.webpackJsonp||[]).push([[2],{108:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(33),o=n.n(r),i=n(94),a=n(282);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=c(this,l(t).call(this)),o.a.bind("g p",function(){return Object(i.a)(".shortcuts-project")}),o.a.bind("g v",function(){return Object(i.a)(".shortcuts-project-activity")}),o.a.bind("g f",function(){return Object(i.a)(".shortcuts-tree")}),o.a.bind("g c",function(){return Object(i.a)(".shortcuts-commits")}),o.a.bind("g j",function(){return Object(i.a)(".shortcuts-builds")}),o.a.bind("g n",function(){return Object(i.a)(".shortcuts-network")}),o.a.bind("g d",function(){return Object(i.a)(".shortcuts-repository-charts")}),o.a.bind("g i",function(){return Object(i.a)(".shortcuts-issues")}),o.a.bind("g b",function(){return Object(i.a)(".shortcuts-issue-boards")}),o.a.bind("g m",function(){return Object(i.a)(".shortcuts-merge_requests")}),o.a.bind("g w",function(){return Object(i.a)(".shortcuts-wiki")}),o.a.bind("g s",function(){return Object(i.a)(".shortcuts-snippets")}),o.a.bind("g k",function(){return Object(i.a)(".shortcuts-kubernetes")}),o.a.bind("g e",function(){return Object(i.a)(".shortcuts-environments")}),o.a.bind("g l",function(){return Object(i.a)(".shortcuts-metrics")}),o.a.bind("i",function(){return Object(i.a)(".shortcuts-new-issue")}),e.enabledHelp.push(".hidden-shortcut.project"),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,a["a"]),t}()},187:function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(26),a=n(80);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.projectSelectInput=o()(t),this.newItemBtn=o()(".new-project-item-link"),this.resourceType=this.newItemBtn.data("type"),this.resourceLabel=this.newItemBtn.data("label"),this.formattedText=this.deriveTextVariants(),this.groupId=this.projectSelectInput.data("groupId"),this.bindEvents(),this.initLocalStorage()}var t,n,r;return t=e,(n=[{key:"bindEvents",value:function(){var e=this;this.projectSelectInput.siblings(".new-project-item-select-button").on("click",function(t){return e.openDropdown(t)}),this.newItemBtn.on("click",function(t){e.getProjectFromLocalStorage()||(t.preventDefault(),e.openDropdown(t))}),this.projectSelectInput.on("change",function(){return e.selectProject()})}},{key:"initLocalStorage",value:function(){a.a.isLocalStorageAccessSafe()&&(this.localStorageKey=["group",this.groupId,this.formattedText.localStorageItemType,"recent-project"].join("-"),this.setBtnTextFromLocalStorage())}},{key:"openDropdown",value:function(e){o()(e.currentTarget).siblings(".project-item-select").select2("open")}},{key:"selectProject",value:function(){var e=JSON.parse(this.projectSelectInput.val()),t={url:"".concat(e.url,"/").concat(this.projectSelectInput.data("relativePath")),name:e.name};this.setNewItemBtnAttributes(t),this.setProjectInLocalStorage(t)}},{key:"setBtnTextFromLocalStorage",value:function(){var e=this.getProjectFromLocalStorage();this.setNewItemBtnAttributes(e)}},{key:"setNewItemBtnAttributes",value:function(e){e?(this.newItemBtn.attr("href",e.url),this.newItemBtn.text("".concat(this.formattedText.defaultTextPrefix," in ").concat(e.name))):this.newItemBtn.text("Select project to create ".concat(this.formattedText.presetTextSuffix))}},{key:"getProjectFromLocalStorage",value:function(){var e=localStorage.getItem(this.localStorageKey);return JSON.parse(e)}},{key:"setProjectInLocalStorage",value:function(e){var t=JSON.stringify(e);localStorage.setItem(this.localStorageKey,t)}},{key:"deriveTextVariants",value:function(){var e=this.resourceLabel;return{localStorageItemType:"new-".concat(this.resourceType.split("_").join("-").slice(0,-1)),defaultTextPrefix:e,presetTextSuffix:this.resourceType.split("_").join(" ").slice(0,-1)}}}])&&s(t.prototype,n),r&&s(t,r),e}();function l(){o()(".ajax-project-select").each(function(e,t){var n,r,a=o()(t).data("simpleFilter")||!1;return this.groupId=o()(t).data("groupId"),this.includeGroups=o()(t).data("includeGroups"),this.allProjects=o()(t).data("allProjects")||!1,this.orderBy=o()(t).data("orderBy")||"id",this.withIssuesEnabled=o()(t).data("withIssuesEnabled"),this.withMergeRequestsEnabled=o()(t).data("withMergeRequestsEnabled"),this.allowClear=o()(t).data("allowClear")||!1,n="Search for project",this.includeGroups&&(n+=" or group"),o()(t).select2({placeholder:n,minimumInputLength:0,query:(r=this,function(e){var t,n;return t=function(t){var n;return n={results:t},e.callback(n)},n=r.includeGroups?function(n){var r;return r=function(e){var r;return r=e.concat(n),t(r)},i.a.groups(e.term,{},r)}:t,r.groupId?i.a.groupProjects(r.groupId,e.term,{with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled},n):i.a.projects(e.term,{order_by:r.orderBy,with_issues_enabled:r.withIssuesEnabled,with_merge_requests_enabled:r.withMergeRequestsEnabled,membership:!r.allProjects},n)}),id:function(e){return a?e.id:JSON.stringify({name:e.name,url:e.web_url})},text:function(e){return e.name_with_namespace||e.name},initSelection:function(e,t){return i.a.project(e.val()).then(function(e){var n=e.data;return t(n)})},allowClear:this.allowClear,dropdownCssClass:"ajax-project-dropdown"}),a?t:new c(t)})}n.d(t,"a",function(){return l})},389:function(e,t,n){"use strict";var r={props:{name:{type:String,required:!0},value:{type:[Number,String],required:!0}}},o=n(2),i=Object(o.a)(r,function(){var e=this.$createElement;return(this._self._c||e)("input",{attrs:{name:this.name,type:"hidden"},domProps:{value:this.value}})},[],!1,null,null,null);i.options.__file="dropdown_hidden_input.vue";t.a=i.exports},444:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(5),o=n(1),i=n(6);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.dataset,r=n.dismissEndpoint,o=n.featureId;this.container=t,this.dismissEndpoint=r,this.featureId=o,this.init()}var t,n,s;return t=e,(n=[{key:"init",value:function(){var e=this;this.container.querySelector(".js-close").addEventListener("click",function(t){return e.dismiss(t)})}},{key:"dismiss",value:function(e){var t=this;e.preventDefault(),r.a.post(this.dismissEndpoint,{feature_name:this.featureId}).then(function(){t.container.remove()}).catch(function(){Object(i.a)(Object(o.a)("An error occurred while dismissing the alert. Refresh the page and try again."))})}}])&&a(t.prototype,n),s&&a(t,s),e}()},473:function(e,t,n){"use strict";var r=n(1),o={props:{isDisabled:{type:Boolean,required:!1,default:!1},isLoading:{type:Boolean,required:!1,default:!1},toggleText:{type:String,required:!1,default:Object(r.a)("Select")}}},i=n(2),a=Object(i.a)(o,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"dropdown-menu-toggle dropdown-menu-full-width",attrs:{disabled:e.isDisabled||e.isLoading,type:"button","data-toggle":"dropdown","aria-expanded":"false"}},[n("gl-loading-icon",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],attrs:{inline:!0}}),e._v(" "),[e.$slots.default?e._t("default"):n("span",{staticClass:"dropdown-toggle-text"},[e._v("\n      "+e._s(e.toggleText)+"\n    ")])],e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}],staticClass:"dropdown-toggle-icon"},[n("i",{staticClass:"fa fa-chevron-down",attrs:{"aria-hidden":"true","data-hidden":"true"}})])],2)},[],!1,null,null,null);a.options.__file="dropdown_button.vue";t.a=a.exports},63:function(e,t,n){"use strict";n.r(t);var r=n(640),o=n(444),i=n(636),a=n(108);document.addEventListener("DOMContentLoaded",function(){var e=document.body.dataset.page;if(["projects:clusters:new","projects:clusters:create_gcp","projects:clusters:create_user"].indexOf(e)>-1){var t=document.querySelector(".gcp-signup-offer");t&&new o.a(t),Object(r.a)()}new i.a,new a.a})},636:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(0),o=n.n(r),i=n(30),a=n.n(i),s=n(1),c=n(19),l=n(5),u=n(6),d=n(187);function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=o()("ul.clone-options-dropdown"),n=o()("#project_clone"),r=o()(".js-git-clone-holder .js-clone-dropdown-label").text().trim();r.length>0&&o()("a:contains('".concat(r,"')"),t).addClass("is-active"),o()("a",t).on("click",function(e){e.preventDefault();var r=o()(e.currentTarget),i=r.attr("href"),a=r.data("cloneType");o()(".is-active",t).removeClass("is-active"),o()('a[data-clone-type="'.concat(a,'"]')).each(function(){var e=o()(this),t=e.find(".dropdown-menu-inner-title").text(),n=e.closest(".project-clone-holder").find(".js-clone-dropdown-label");e.toggleClass("is-active"),n.text(t)}),o()("#modal-geo-info").data({cloneUrlSecondary:r.attr("href"),cloneUrlPrimary:r.data("primaryUrl")||""}),n.val(i),o()(".js-git-empty .js-clone").text(i)}),e.initRefSwitcher(),o()(".project-refs-select").on("change",function(){return o()(this).parents("form").submit()}),o()(".hide-no-ssh-message").on("click",function(e){return a.a.set("hide_no_ssh_message","false"),o()(this).parents(".no-ssh-key-message").remove(),e.preventDefault()}),o()(".hide-no-password-message").on("click",function(e){return a.a.set("hide_no_password_message","false"),o()(this).parents(".no-password-message").remove(),e.preventDefault()}),o()(".hide-shared-runner-limit-message").on("click",function(e){var t=o()(this).parents(".shared-runner-quota-message"),n=t.data("scope");a.a.set("hide_shared_runner_quota_message","false",{path:n}),t.remove(),e.preventDefault()}),o()(".hide-auto-devops-implicitly-enabled-banner").on("click",function(e){var t=o()(this).data("project-id"),n="hide_auto_devops_implicitly_enabled_banner_".concat(t);return a.a.set(n,"false"),o()(this).parents(".auto-devops-implicitly-enabled-banner").remove(),e.preventDefault()}),e.projectSelectDropdown()}var t,n,r;return t=e,r=[{key:"projectSelectDropdown",value:function(){Object(d.a)(),o()(".project-item-select").on("click",function(t){return e.changeProject(o()(t.currentTarget).val())})}},{key:"changeProject",value:function(e){return window.location=e}},{key:"initRefSwitcher",value:function(){var e=document.createElement("li"),t=document.createElement("a");return t.href="#",o()(".js-project-refs-dropdown").each(function(){var n,r;return n=o()(this),r=n.data("selected"),n.glDropdown({data:function(e,t){l.a.get(n.data("refsUrl"),{params:{ref:n.data("ref"),search:e}}).then(function(e){var n=e.data;return t(n)}).catch(function(){return Object(u.a)(Object(s.a)("An error occurred while getting projects"))})},selectable:!0,filterable:!0,filterRemote:!0,filterByText:!0,inputFieldName:n.data("inputFieldName"),fieldName:n.data("fieldName"),renderRow:function(n){var o=e.cloneNode(!1);if(null!=n.header)o.className="dropdown-header",o.textContent=n.header;else{var i=t.cloneNode(!1);n===r&&(i.className="is-active"),i.textContent=n,i.dataset.ref=n,o.appendChild(i)}return o},id:function(e,t){return t.attr("data-ref")},toggleLabel:function(e,t){return t.text().trim()},clicked:function(e){if(e.e.preventDefault(),o()('input[name="ref"]').length){var t=n.closest("form"),r=n.data("visit"),i=!!r||r,a=t.attr("action"),s=-1===a.indexOf("?")?"?":"&";i&&Object(c.g)("".concat(a).concat(s).concat(t.serialize()))}}})})}}],(n=null)&&p(t.prototype,n),r&&p(t,r),e}()},640:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"setProject",function(){return v}),n.d(r,"setZone",function(){return y}),n.d(r,"setMachineType",function(){return w}),n.d(r,"setIsValidatingProjectBilling",function(){return _}),n.d(r,"fetchProjects",function(){return O}),n.d(r,"validateProjectBilling",function(){return S}),n.d(r,"fetchZones",function(){return E}),n.d(r,"fetchMachineTypes",function(){return P}),n.d(r,"default",function(){return I});var o={};n.r(o),n.d(o,"hasProject",function(){return T}),n.d(o,"hasZone",function(){return C}),n.d(o,"hasMachineType",function(){return x});var i=n(3),a=n(6),s=n(4),c=n.n(s),l=n(1),u=n(8),d={props:{placeholderText:{type:String,required:!0,default:Object(l.a)("Search")}},data:function(){return{searchQuery:this.value}},watch:{searchQuery:function(e){this.$emit("input",e)}}},p=n(2),h=Object(p.a)(d,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dropdown-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],staticClass:"dropdown-input-field",attrs:{placeholder:e.placeholderText,type:"search",autocomplete:"off"},domProps:{value:e.searchQuery},on:{input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}}),e._v(" "),n("i",{staticClass:"fa fa-search dropdown-input-search",attrs:{"aria-hidden":"true","data-hidden":"true"}}),e._v(" "),n("i",{staticClass:"fa fa-times dropdown-input-clear js-dropdown-input-clear",attrs:{"aria-hidden":"true","data-hidden":"true",role:"button"}})])},[],!1,null,null,null);h.options.__file="dropdown_search_input.vue";var f,g=h.exports,m=n(389),b=n(473),j=function(e){var t=e.resource,n=e.params,r=e.commit,o=e.mutation,i=e.payloadKey;return new Promise(function(e,a){return t.list(n).then(function(t){var n=t.result;r(o,n[i]),e()},function(e){a(e)})})},v=function(e,t){(0,e.commit)("SET_PROJECT",t)},y=function(e,t){(0,e.commit)("SET_ZONE",t)},w=function(e,t){(0,e.commit)("SET_MACHINE_TYPE",t)},_=function(e,t){(0,e.commit)("SET_IS_VALIDATING_PROJECT_BILLING",t)},O=function(e){var t=e.commit;return j({resource:gapi.client.cloudresourcemanager.projects,params:{},commit:t,mutation:"SET_PROJECTS",payloadKey:"projects"})},S=function(e){var t=e.dispatch,n=e.commit,r=e.state;return new Promise(function(e,o){var i=gapi.client.cloudbilling.projects.getBillingInfo({name:"projects/".concat(r.selectedProject.projectId)});return n("SET_ZONE",""),n("SET_MACHINE_TYPE",""),i.then(function(r){var o=r.result.billingEnabled;n("SET_PROJECT_BILLING_STATUS",!!o),t("setIsValidatingProjectBilling",!1),e()},function(e){t("setIsValidatingProjectBilling",!1),o(e)})})},E=function(e){var t=e.commit,n=e.state;return j({resource:gapi.client.compute.zones,params:{project:n.selectedProject.projectId},commit:t,mutation:"SET_ZONES",payloadKey:"items"})},P=function(e){var t=e.commit,n=e.state;return j({resource:gapi.client.compute.machineTypes,params:{project:n.selectedProject.projectId,zone:n.selectedZone},commit:t,mutation:"SET_MACHINE_TYPES",payloadKey:"items"})},I=function(){},T=function(e){return!!e.selectedProject.projectId},C=function(e){return!!e.selectedZone},x=function(e){return!!e.selectedMachineType};function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=(k(f={},"SET_PROJECT",function(e,t){Object.assign(e,{selectedProject:t})}),k(f,"SET_IS_VALIDATING_PROJECT_BILLING",function(e,t){Object.assign(e,{isValidatingProjectBilling:t})}),k(f,"SET_PROJECT_BILLING_STATUS",function(e,t){Object.assign(e,{projectHasBillingEnabled:t})}),k(f,"SET_ZONE",function(e,t){Object.assign(e,{selectedZone:t})}),k(f,"SET_MACHINE_TYPE",function(e,t){Object.assign(e,{selectedMachineType:t})}),k(f,"SET_PROJECTS",function(e,t){Object.assign(e,{projects:t})}),k(f,"SET_ZONES",function(e,t){Object.assign(e,{zones:t})}),k(f,"SET_MACHINE_TYPES",function(e,t){Object.assign(e,{machineTypes:t})}),f);i.default.use(u.a);var L={store:new u.a.Store({actions:r,getters:o,mutations:B,state:{selectedProject:{projectId:"",name:""},selectedZone:"",selectedMachineType:"",isValidatingProjectBilling:null,projectHasBillingEnabled:null,projects:[],zones:[],machineTypes:[]}}),components:{DropdownButton:b.a,DropdownSearchInput:g,DropdownHiddenInput:m.a},props:{fieldId:{type:String,required:!0},fieldName:{type:String,required:!0},defaultValue:{type:String,required:!1,default:""}},data:function(){return{isLoading:!1,hasErrors:!1,searchQuery:"",gapiError:""}},computed:{results:function(){var e=this;return this.items?this.items.filter(function(t){return t.name.toLowerCase().indexOf(e.searchQuery)>-1}):[]}},methods:{fetchSuccessHandler:function(){var e=this;if(this.defaultValue){var t=c.a.find(this.items,function(t){return t.name===e.defaultValue});t&&this.setItem(t.name)}this.isLoading=!1,this.hasErrors=!1},fetchFailureHandler:function(e){this.isLoading=!1,this.hasErrors=!0,e.result&&e.result.error&&(this.gapiError=e.result.error.message)}}};function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){D(e,t,n[t])})}return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var H={name:"GkeProjectIdDropdown",mixins:[L],props:{docsUrl:{type:String,required:!0}},computed:N({},Object(u.d)(["selectedProject","isValidatingProjectBilling","projectHasBillingEnabled"]),Object(u.d)({items:"projects"}),Object(u.c)(["hasProject"]),{hasOneProject:function(){return this.items&&1===this.items.length},isDisabled:function(){return this.isLoading||this.isValidatingProjectBilling||this.items&&this.items.length<2},toggleText:function(){return this.isValidatingProjectBilling?Object(l.e)("ClusterIntegration|Validating project billing status"):this.isLoading?Object(l.e)("ClusterIntegration|Fetching projects"):this.hasProject?this.selectedProject.name:this.items?Object(l.e)("ClusterIntegration|Select project"):Object(l.e)("ClusterIntegration|No projects found")},helpText:function(){var e;return this.hasErrors?this.errorMessage:(this.items||(e="ClusterIntegration|We were unable to fetch any projects. Ensure that you have a project on %{docsLinkStart}Google Cloud Platform%{docsLinkEnd}."),e=this.items&&this.items.length?"ClusterIntegration|To use a new project, first create one on %{docsLinkStart}Google Cloud Platform%{docsLinkEnd}.":"ClusterIntegration|To create a cluster, first create a project on %{docsLinkStart}Google Cloud Platform%{docsLinkEnd}.",Object(l.f)(Object(l.e)(e),{docsLinkEnd:'&nbsp;<i class="fa fa-external-link" aria-hidden="true"></i></a>',docsLinkStart:'<a href="'.concat(c.a.escape(this.docsUrl),'" target="_blank" rel="noopener noreferrer">')},!1))},errorMessage:function(){return this.projectHasBillingEnabled?Object(l.f)(Object(l.e)("ClusterIntegration|An error occured while trying to fetch your projects: %{error}"),{error:this.gapiError}):this.gapiError?Object(l.e)("ClusterIntegration|We could not verify that one of your projects on GCP has billing enabled. Please try again."):Object(l.f)(Object(l.e)('This project does not have billing enabled. To create a cluster, <a href=%{linkToBilling} target="_blank" rel="noopener noreferrer">enable billing <i class="fa fa-external-link" aria-hidden="true"></i></a> and try again.'),{linkToBilling:"https://console.cloud.google.com/freetrial?utm_campaign=2018_cpanel&utm_source=gitlab&utm_medium=referral"},!1)}}),watch:{selectedProject:function(){this.setIsValidatingProjectBilling(!0),this.validateProjectBilling().then(this.validateProjectBillingSuccessHandler).catch(this.validateProjectBillingFailureHandler)}},created:function(){this.isLoading=!0,this.fetchProjects().then(this.fetchSuccessHandler).catch(this.fetchFailureHandler)},methods:N({},Object(u.b)(["fetchProjects","setIsValidatingProjectBilling","validateProjectBilling"]),Object(u.b)({setItem:"setProject"}),{fetchSuccessHandler:function(){var e=this;if(this.defaultValue){var t=c.a.find(this.items,function(t){return t.projectId===e.defaultValue});t&&this.setItem(t)}else 1===this.items.length&&this.setItem(this.items[0]);this.isLoading=!1,this.hasErrors=!1},validateProjectBillingSuccessHandler:function(){this.hasErrors=!this.projectHasBillingEnabled},validateProjectBillingFailureHandler:function(e){this.hasErrors=!0,this.gapiError=e.result?e.result.error.message:e}})},M=Object(p.a)(H,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"js-gcp-project-id-dropdown dropdown"},[n("dropdown-hidden-input",{attrs:{name:e.fieldName,value:e.selectedProject.projectId}}),e._v(" "),n("dropdown-button",{class:{"border-danger":e.hasErrors,"read-only":e.hasOneProject},attrs:{"is-disabled":e.isDisabled,"is-loading":e.isLoading,"toggle-text":e.toggleText}}),e._v(" "),n("div",{staticClass:"dropdown-menu dropdown-select"},[n("dropdown-search-input",{attrs:{"placeholder-text":e.s__("ClusterIntegration|Search projects")},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),e._v(" "),n("div",{staticClass:"dropdown-content"},[n("ul",[n("li",{directives:[{name:"show",rawName:"v-show",value:!e.results.length,expression:"!results.length"}]},[n("span",{staticClass:"menu-item"},[e._v("\n              "+e._s(e.s__("ClusterIntegration|No projects matched your search"))+"\n            ")])]),e._v(" "),e._l(e.results,function(t){return n("li",{key:t.project_number},[n("button",{attrs:{type:"button"},on:{click:function(n){n.preventDefault(),e.setItem(t)}}},[e._v("\n              "+e._s(t.name)+"\n            ")])])})],2)]),e._v(" "),n("div",{staticClass:"dropdown-loading"},[n("gl-loading-icon")],1)],1)],1),e._v(" "),n("span",{staticClass:"form-text",class:{"text-danger":e.hasErrors,"text-muted":!e.hasErrors},domProps:{innerHTML:e._s(e.helpText)}})])},[],!1,null,null,null);M.options.__file="gke_project_id_dropdown.vue";var Z=M.exports;function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){V(e,t,n[t])})}return e}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A={name:"GkeZoneDropdown",mixins:[L],computed:q({},Object(u.d)(["selectedProject","selectedZone","projects","isValidatingProjectBilling","projectHasBillingEnabled"]),Object(u.d)({items:"zones"}),{isDisabled:function(){return this.isLoading||this.isValidatingProjectBilling||!this.projectHasBillingEnabled},toggleText:function(){return this.isLoading?Object(l.e)("ClusterIntegration|Fetching zones"):this.selectedZone?this.selectedZone:this.projectHasBillingEnabled?Object(l.e)("ClusterIntegration|Select zone"):Object(l.e)("ClusterIntegration|Select project to choose zone")},errorMessage:function(){return Object(l.f)(Object(l.e)("ClusterIntegration|An error occured while trying to fetch project zones: %{error}"),{error:this.gapiError})}}),watch:{isValidatingProjectBilling:function(e){this.hasErrors=!1,!e&&this.projectHasBillingEnabled&&(this.isLoading=!0,this.fetchZones().then(this.fetchSuccessHandler).catch(this.fetchFailureHandler))}},methods:q({},Object(u.b)(["fetchZones"]),Object(u.b)({setItem:"setZone"}))},z=Object(p.a)(A,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"js-gcp-zone-dropdown dropdown"},[n("dropdown-hidden-input",{attrs:{name:e.fieldName,value:e.selectedZone}}),e._v(" "),n("dropdown-button",{class:{"border-danger":e.hasErrors},attrs:{"is-disabled":e.isDisabled,"is-loading":e.isLoading,"toggle-text":e.toggleText}}),e._v(" "),n("div",{staticClass:"dropdown-menu dropdown-select"},[n("dropdown-search-input",{attrs:{"placeholder-text":e.s__("ClusterIntegration|Search zones")},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),e._v(" "),n("div",{staticClass:"dropdown-content"},[n("ul",[n("li",{directives:[{name:"show",rawName:"v-show",value:!e.results.length,expression:"!results.length"}]},[n("span",{staticClass:"menu-item"},[e._v("\n              "+e._s(e.s__("ClusterIntegration|No zones matched your search"))+"\n            ")])]),e._v(" "),e._l(e.results,function(t){return n("li",{key:t.id},[n("button",{attrs:{type:"button"},on:{click:function(n){n.preventDefault(),e.setItem(t.name)}}},[e._v("\n              "+e._s(t.name)+"\n            ")])])})],2)]),e._v(" "),n("div",{staticClass:"dropdown-loading"},[n("gl-loading-icon")],1)],1)],1),e._v(" "),e.hasErrors?n("span",{staticClass:"form-text",class:{"text-danger":e.hasErrors,"text-muted":!e.hasErrors}},[e._v("\n    "+e._s(e.errorMessage)+"\n  ")]):e._e()])},[],!1,null,null,null);z.options.__file="gke_zone_dropdown.vue";var G=z.exports;function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){F(e,t,n[t])})}return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Q={name:"GkeMachineTypeDropdown",mixins:[L],computed:R({},Object(u.d)(["isValidatingProjectBilling","projectHasBillingEnabled","selectedZone","selectedMachineType"]),Object(u.d)({items:"machineTypes"}),Object(u.c)(["hasZone","hasMachineType"]),{allDropdownsSelected:function(){return this.projectHasBillingEnabled&&this.hasZone&&this.hasMachineType},isDisabled:function(){return this.isLoading||this.isValidatingProjectBilling||!this.projectHasBillingEnabled||!this.hasZone},toggleText:function(){return this.isLoading?Object(l.e)("ClusterIntegration|Fetching machine types"):this.selectedMachineType?this.selectedMachineType:this.projectHasBillingEnabled||this.hasZone?this.hasZone?Object(l.e)("ClusterIntegration|Select machine type"):Object(l.e)("ClusterIntegration|Select zone to choose machine type"):Object(l.e)("ClusterIntegration|Select project and zone to choose machine type")},errorMessage:function(){return Object(l.f)(Object(l.e)("ClusterIntegration|An error occured while trying to fetch zone machine types: %{error}"),{error:this.gapiError})}}),watch:{selectedZone:function(){this.hasErrors=!1,this.hasZone&&(this.isLoading=!0,this.fetchMachineTypes().then(this.fetchSuccessHandler).catch(this.fetchFailureHandler))},selectedMachineType:function(){this.enableSubmit()}},methods:R({},Object(u.b)(["fetchMachineTypes"]),Object(u.b)({setItem:"setMachineType"}),{enableSubmit:function(){if(this.allDropdownsSelected){var e=document.querySelector(".js-gke-cluster-creation-submit");e&&e.removeAttribute("disabled")}}})},J=Object(p.a)(Q,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"js-gcp-machine-type-dropdown dropdown"},[n("dropdown-hidden-input",{attrs:{name:e.fieldName,value:e.selectedMachineType}}),e._v(" "),n("dropdown-button",{class:{"border-danger":e.hasErrors},attrs:{"is-disabled":e.isDisabled,"is-loading":e.isLoading,"toggle-text":e.toggleText}}),e._v(" "),n("div",{staticClass:"dropdown-menu dropdown-select"},[n("dropdown-search-input",{attrs:{"placeholder-text":e.s__("ClusterIntegration|Search machine types")},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),e._v(" "),n("div",{staticClass:"dropdown-content"},[n("ul",[n("li",{directives:[{name:"show",rawName:"v-show",value:!e.results.length,expression:"!results.length"}]},[n("span",{staticClass:"menu-item"},[e._v("\n              "+e._s(e.s__("ClusterIntegration|No machine types matched your search"))+"\n            ")])]),e._v(" "),e._l(e.results,function(t){return n("li",{key:t.id},[n("button",{attrs:{type:"button"},on:{click:function(n){n.preventDefault(),e.setItem(t.name)}}},[e._v("\n              "+e._s(t.name)+"\n            ")])])})],2)]),e._v(" "),n("div",{staticClass:"dropdown-loading"},[n("gl-loading-icon")],1)],1)],1),e._v(" "),e.hasErrors?n("span",{staticClass:"form-text",class:{"text-danger":e.hasErrors,"text-muted":!e.hasErrors}},[e._v("\n    "+e._s(e.errorMessage)+"\n  ")]):e._e()])},[],!1,null,null,null);J.options.__file="gke_machine_type_dropdown.vue";var U=J.exports,$=Object(l.e)("ClusterIntegration|An error occurred when trying to contact the Google Cloud API. Please try again later.");function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Y=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=document.querySelector(e);if(!o)return!1;var a=o.querySelector("input");return new i.default({el:o,components:K({},n,t),render:function(e){return e(n,{props:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){K(e,t,n[t])})}return e}({fieldName:a.getAttribute("name"),fieldId:a.getAttribute("id"),defaultValue:a.value},r)})}})},W=function(){Object(a.a)($)},X=function(){var e=document.querySelector(".js-gke-cluster-creation");return!!e&&gapi.client.init({discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/cloudbilling/v1/rest","https://www.googleapis.com/discovery/v1/apis/cloudresourcemanager/v1/rest","https://www.googleapis.com/discovery/v1/apis/compute/v1/rest"]}).then(function(){gapi.client.setToken({access_token:e.dataset.token}),function(){var e=".js-gcp-project-id-dropdown-entry-point",t=document.querySelector(e);Y(e,Z,"gke-project-id-dropdown",{docsUrl:t.dataset.docsurl})}(),Y(".js-gcp-zone-dropdown-entry-point",G,"gke-zone-dropdown"),Y(".js-gcp-machine-type-dropdown-entry-point",U,"gke-machine-type-dropdown")}).catch(W)};t.a=function(){return gapi?gapi.load("client",X):(W(),!1)}}}]);
//# sourceMappingURL=commons~pages.projects~pages.projects.activity~pages.projects.artifacts.browse~pages.projects.artifa~0ddaebee.026323f1.chunk.js.map
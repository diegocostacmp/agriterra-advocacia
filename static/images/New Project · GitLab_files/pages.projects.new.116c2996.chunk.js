(this.webpackJsonp=this.webpackJsonp||[]).push([[142],{1478:function(t,e,n){n(34),n(63),t.exports=n(1595)},1595:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a);function c(t){if(t&&"selectedIndex"in t){var e=t.options[t.selectedIndex].dataset,n=e.name,a=e.visibility,o=e.visibilityLevel,c=e.showPath,r=e.editPath;document.querySelectorAll(".visibility-level-setting .form-check").forEach(function(t){var e=t.querySelector("input[type=radio]"),i=e?e.value:0,l=t.querySelector(".option-title"),s=l?l.innerText.toLowerCase():"";if(!t.classList.contains("restricted"))if(o<i){t.classList.add("disabled"),e.disabled=!0;var p=t.querySelector(".option-disabled-reason");p&&(p.innerHTML="This project cannot be ".concat(s,' because the visibility of\n            <a href="').concat(c,'">').concat(n,"</a> is ").concat(a,". To make this project\n            ").concat(s,', you must first <a href="').concat(r,'">change the visibility</a>\n            of the parent group.'))}else t.classList.remove("disabled"),e.disabled=!1})}}var r=n(465);document.addEventListener("DOMContentLoaded",function(){var t;(t=document.querySelector("select.js-select-namespace"))&&(o()(".select2.js-select-namespace").on("change",function(){return c(t)}),c(t)),r.a.bindEvents()});var i=function(){var t=o()("#new_project"),e=o()(".custom-template-button > input"),n=o()(".project-fields-form"),a=o()(".selected-icon"),c=o()(".selected-template"),i=o()("#template-project-name #project_path"),l=o()(".change-template"),s=o()(".project-templates-buttons"),p=o()(".project-fields-form input#project_use_custom_template");1===t.length&&0!==e.length&&(e.on("change",function(){s.addClass("hidden"),n.addClass("selected"),a.empty();var t=o()(this).val();c.text(t),o()(this).parents(".template-option").find(".avatar").clone().addClass("d-block").removeClass("s40").appendTo(a),i.focus(),p.val(!0);var e=o()(".tab-pane.active #project_name"),l=o()(".tab-pane.active #project_path");e.focus(),e.keyup(function(){return r.a.onProjectNameChange(e,l)})}),l.on("click",function(){s.removeClass("hidden"),e.prop("checked",!1),p.val(!1)}))},l=function(){return"function"==typeof window.snowplow},s=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{label:"",property:"",value:""};if(l()&&t&&e){var a=n.label,o=n.property,c=n.value;try{window.snowplow("trackStructEvent",t,e,a,o,c)}catch(t){}}},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body.dataset.page;if(l()){var n=function(t){var n=t.currentTarget,a=n.getAttribute("data-track-label"),o=n.getAttribute("data-track-property")||"",c=n.getAttribute("data-track-event"),r=n.value||"";"checkbox"===n.type&&(r=n.checked),void 0!==n.getAttribute("data-track-value")&&null!==n.getAttribute("data-track-value")&&(r=n.getAttribute("data-track-value")),s(e,c,{label:a,property:o,value:r})};document.querySelectorAll("".concat(t," [data-track-label]")).forEach(function(t){t.addEventListener("click",function(t){return n(t)})}),o()("".concat(t," .select2[data-track-label]")).on("click",function(t){return n(t)})}},u=function(t){p(t)};document.addEventListener("DOMContentLoaded",function(){var t,e;t=o()('.nav-link[href="#custom-templates"]'),(e=o()(".project-templates-buttons#custom-templates")).on("ajax:success",i),t.one("click",function(){o.a.get(e.data("initialTemplates"))}),i(),u(".js-toggle-container")})},465:function(t,e,n){"use strict";var a=n(0),o=n.n(a),c=n(11),r=n(36),i=!1,l=function(t){var e=t.parents(".toggle-import-form").find("#project_path");if(!i){var n=t.val().trim();if(0!==n.length){n=n.replace(/\/?(\.git\/?)?(\?.*)?(#.*)?$/,"");var a=/\/([^/]+)$/.exec(n);a&&e.val(a[1])}}},s=function(t,e){var n=Object(r.k)(t.val());e.val(n)};e.a={bindEvents:function(){var t=o()("#new_project"),e=o()("#project_import_url"),n=o()(".tab-pane.active #project_path"),a=o()(".template-button > input"),r=o()(".project-fields-form"),p=o()(".selected-template"),u=o()(".change-template"),d=o()(".selected-icon"),v=o()(".push-new-project-tip"),m=o()(".project-templates-buttons"),f=o()(".tab-pane.active #project_name");1===t.length&&(o()(".how_to_import_link").on("click",function(t){t.preventDefault(),o()(t.currentTarget).next(".modal").show()}),o()(".modal-header .close").on("click",function(){o()(".modal").hide()}),o()(".btn_import_gitlab_project").on("click",function(){var t=o()("a.btn_import_gitlab_project").attr("href");o()(".btn_import_gitlab_project").attr("href","".concat(t,"?namespace_id=").concat(o()("#project_namespace_id").val(),"&name=").concat(f.val(),"&path=").concat(n.val()))}),v&&v.removeAttr("rel").removeAttr("target").on("click",function(t){t.preventDefault()}).popover({title:v.data("title"),placement:"bottom",html:!0,content:o()(".push-new-project-tip-template").html()}).on("shown.bs.popover",function(){o()(document).on("click.popover touchstart.popover",function(t){0===o()(t.target).closest(".popover").length&&v.trigger("click")});var t=o()("#".concat(v.attr("aria-describedby"))).find(".js-select-on-focus");Object(c.b)(t),t.focus()}).on("hide.bs.popover",function(){o()(document).off("click.popover touchstart.popover")}),a.on("change",function(){m.addClass("hidden"),r.addClass("selected"),d.empty();var t={rails:{text:"Ruby on Rails",icon:".template-option svg.icon-rails"},express:{text:"NodeJS Express",icon:".template-option svg.icon-node-express"},spring:{text:"Spring",icon:".template-option svg.icon-java-spring"}}[o()(this).val()];p.text(t.text),o()(t.icon).clone().addClass("d-block").appendTo(d);var e=o()(".tab-pane.active #project_name"),n=o()(".tab-pane.active #project_path");e.focus(),e.keyup(function(){s(e,n),i=n.val().trim().length>0})}),u.on("click",function(){m.removeClass("hidden"),r.removeClass("selected"),a.prop("checked",!1)}),t.on("submit",function(){n.val(n.val().trim())}),n.on("keyup",function(){i=n.val().trim().length>0}),e.keyup(function(){return l(e)}),o()(".js-import-git-toggle-button").on("click",function(){var t=o()("#project_mirror");t.attr("disabled",!t.attr("disabled"))}),f.on("keyup change",function(){s(f,n),i=n.val().trim().length>0}))},deriveProjectPathFromUrl:l,onProjectNameChange:s}}},[[1478,1,0,2]]]);
//# sourceMappingURL=pages.projects.new.116c2996.chunk.js.map